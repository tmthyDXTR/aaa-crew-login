<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,minimum-scale=1" />
        <title>AAA 2024 Password Reset</title>
        <!-- the form awesome library is used to add icons to our form -->
        <link
            rel="stylesheet"
            href="https://use.fontawesome.com/releases/v5.7.1/css/all.css"
        />
        <!-- include the stylesheet file -->
        <link href="/css/style.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <div class="overlay" id="overlay" style="display: none"></div>
        <div class="login-background-image"></div>
        <div class="login-page">
            <h1 id="title">Password reset</h1>

            <div id="resetPasswordContainer" style="display: block">
                <form
                    id="resetPassword"
                    class="resetPassword-form"
                    method="post"
                >
                    <label for="reg_password">
                        <i class="fas fa-lock"></i>
                    </label>
                    <input
                        type="password"
                        name="reset_password"
                        placeholder="Neues Password"
                        id="reset_password"
                        required
                    /><br />
                    <input
                        type="password"
                        name="reset_password2"
                        placeholder="Neues Password"
                        id="reset_password2"
                        required
                    /><br />
                    <input
                        type="submit"
                        class="dos-button"
                        value="Reset Password"
                    />
                </form>
            </div>
        </div>

        <div class="alert" id="alert-window" style="display: none">
            <p id="alert-content"></p>
            <center>
                <button class="dos-button menu-btn" id="alert-ok-button">
                    OK NICE
                </button>
            </center>
        </div>

        <script>
            // Function to set the form action dynamically based on the token
            function setFormAction(token) {
                document.getElementById("resetPassword").action =
                    "/reset-password/" + token;
            }

            // Function to extract the token from the URL and set the form action
            function setFormActionFromURL() {
                // Get the current URL
                const currentURL = window.location.href;

                // Extract the token from the URL
                const token = currentURL.substring(
                    currentURL.lastIndexOf("/") + 1
                );

                // Set the form action
                setFormAction(token);
            }

            // Call the function when the page loads
            window.onload = setFormActionFromURL;
        </script>
    </body>
</html>
